<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pixel Runner</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}

html,body{
  width:100%;
  height:100%;
  background:#0f172a;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
}

.wrap{
  width:100%;
  max-width:520px;
  height:60vh;
  max-height:360px;
  position:relative;
}

canvas{
  width:100%;
  height:100%;
  display:block;
  border-bottom:3px solid #38bdf8;
  position:relative;
  z-index:1;
}

/* ‚≠ê Visible neon score */
.hud{
  position:absolute;
  top:15px;
  width:100%;
  text-align:center;
  font-family:monospace;
  font-weight:900;
  font-size:1.6rem;
  color:#38bdf8;
  text-shadow:0 0 10px rgba(56,189,248,0.8);
  z-index:10;
}

.msg{
  position:absolute;
  inset:0;
  background:rgba(15,23,42,.95);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:12px;
  z-index:20;
  backdrop-filter: blur(5px);
}

.msg h2 {
  color:#38bdf8;
  text-shadow: 0 0 10px rgba(56,189,248, 0.5);
  font-size: 2rem;
  margin-bottom: 10px;
}

.msg p {
  color: #e2e8f0;
  font-size: 1.2rem;
  text-align: center;
  margin: 5px 0;
}

.msg .final-score {
  color: #a5b4fc;
  text-shadow: 0 0 8px rgba(165, 180, 252, 0.6);
  font-weight: bold;
  font-size: 1.3rem;
}

.medal-display {
  font-size: 2.5rem;
  margin: 10px 0;
  text-shadow: 0 0 15px currentColor;
}

.msg button{
  padding:12px 30px;
  border:none;
  border-radius:30px;
  background:#38bdf8;
  color:#000;
  font-weight:700;
  cursor:pointer;
  font-size: 1.1rem;
  transition: all 0.2s ease;
  box-shadow: 0 0 15px rgba(56, 189, 248, 0.5);
}

.msg button:hover {
  transform: scale(1.05);
  box-shadow: 0 0 20px rgba(56, 189, 248, 0.8);
}

/* Medal-specific styles */
.legend { color: #fbbf24; text-shadow: 0 0 15px rgba(251, 191, 36, 0.7); }
.gold { color: #fbbf24; text-shadow: 0 0 15px rgba(251, 191, 36, 0.7); }
.silver { color: #cbd5e1; text-shadow: 0 0 15px rgba(203, 213, 225, 0.7); }
.bronze { color: #f97316; text-shadow: 0 0 15px rgba(249, 115, 22, 0.7); }
.novice { color: #64748b; text-shadow: 0 0 10px rgba(100, 116, 139, 0.5); }
</style>
</head>
<body>

<div class="wrap" id="wrap">
  <canvas id="cvs"></canvas>

  <!-- ‚úÖ Only score system -->
  <div class="hud" id="score">0</div>

  <div class="msg" id="startMsg">
    <h2>‚ö° PIXEL RUNNER</h2>
    <button id="startBtn">START</button>
  </div>

  <div class="msg" id="endMsg" style="display:none">
    <h2 id="medal" class="medal-display"></h2>
    <p id="finalScore" class="final-score"></p>
    <button id="retryBtn">Retry</button>
  </div>
</div>

<script>
(function(){

const cvs=document.getElementById("cvs");
const ctx=cvs.getContext("2d");
const wrap=document.getElementById("wrap");

let W,H,GROUND;
let runner,obstacles=[],stars=[];
let score=0;
let hiScore=parseInt(localStorage.getItem("pixelRunnerHS")||0);
let state="ready",frame=0;

/* -------- Resize -------- */
function resize(){
  const r=wrap.getBoundingClientRect();
  W=cvs.width=r.width;
  H=cvs.height=r.height;
  GROUND=H*0.82;
}
window.addEventListener("resize",resize);

/* -------- Sound -------- */
const audioCtx=new (window.AudioContext||window.webkitAudioContext)();
function beep(freq,dur){
  const osc=audioCtx.createOscillator();
  const gain=audioCtx.createGain();
  osc.connect(gain);
  gain.connect(audioCtx.destination);
  osc.frequency.value=freq;
  gain.gain.value=0.05;
  osc.start();
  setTimeout(()=>osc.stop(),dur);
}

/* -------- Init -------- */
function init(){
  resize();

  const size=H*0.08;

  runner={
    x:W*0.12,
    y:GROUND-size,
    w:size,
    h:size,
    vy:0,
    jumping:false
  };

  obstacles=[];
  stars=[];
  for(let i=0;i<40;i++){
    stars.push({
      x:Math.random()*W,
      y:Math.random()*H,
      s:Math.random()*2+1
    });
  }

  score=0;
  frame=0;
  state="ready";

  document.getElementById("score").textContent="0";
  document.getElementById("startMsg").style.display="flex";
  document.getElementById("endMsg").style.display="none";

  draw();
}

/* -------- Jump -------- */
function jump(){
  if(state==="ready"){
    state="playing";
    document.getElementById("startMsg").style.display="none";
    loop();
    return;
  }
  if(state==="playing" && !runner.jumping){
    runner.vy=-H*0.035;
    runner.jumping=true;
    beep(400,80);
  }
}

/* -------- Spawn Obstacle -------- */
function spawnObstacle(){
  const type=Math.floor(Math.random()*3);
  const baseSize=H*0.06;

  obstacles.push({
    x:W,
    type:type,
    w:baseSize,
    h: type===2 ? baseSize*1.8 : baseSize
  });
}

/* -------- Update -------- */
function update(){

  frame++;
  score=Math.floor(frame/8);
  document.getElementById("score").textContent=score;

  const baseSpeed=2.5;
  const maxSpeed=6;
  const ramp=Math.sqrt(score)*0.08;
  const speed=Math.min(baseSpeed+ramp,maxSpeed);

  runner.vy+=0.7;
  runner.y+=runner.vy;

  if(runner.y>=GROUND-runner.h){
    runner.y=GROUND-runner.h;
    runner.vy=0;
    runner.jumping=false;
  }

  if(obstacles.length===0 ||
     obstacles[obstacles.length-1].x < W*0.55){
    if(Math.random()<0.02){
      spawnObstacle();
    }
  }

  for(let i=obstacles.length-1;i>=0;i--){
    const o=obstacles[i];
    o.x-=speed;

    if(o.x+o.w<0){
      obstacles.splice(i,1);
      continue;
    }

    if(
      runner.x+runner.w*0.75 > o.x &&
      runner.x+runner.w*0.25 < o.x+o.w &&
      runner.y+runner.h > GROUND-o.h+4
    ){
      gameOver();
      return;
    }
  }

  for(let s of stars){
    s.x-=speed*0.3;
    if(s.x<0)s.x=W;
  }
}

/* -------- Draw -------- */
function draw(){

  ctx.fillStyle="#0f172a";
  ctx.fillRect(0,0,W,H);

  ctx.fillStyle="#475569";
  for(let s of stars){
    ctx.fillRect(s.x,s.y,s.s,s.s);
  }

  ctx.fillStyle="#1e293b";
  ctx.fillRect(0,GROUND,W,2);

  ctx.fillStyle="#4ade80";
  ctx.fillRect(runner.x,runner.y,runner.w,runner.h);

  ctx.fillStyle="#f43f5e";
  for(let o of obstacles){
    if(o.type===0){
      ctx.fillRect(o.x,GROUND-o.h,o.w,o.h);
    }else if(o.type===1){
      ctx.beginPath();
      ctx.moveTo(o.x,GROUND);
      ctx.lineTo(o.x+o.w/2,GROUND-o.h);
      ctx.lineTo(o.x+o.w,GROUND);
      ctx.closePath();
      ctx.fill();
    }else{
      ctx.fillRect(o.x,GROUND-o.h,o.w,o.h);
      ctx.fillRect(o.x+o.w*0.4,GROUND-o.h*1.4,o.w*0.6,o.h*0.4);
    }
  }
}

/* -------- Loop -------- */
function loop(){
  if(state!=="playing")return;
  update();
  draw();
  requestAnimationFrame(loop);
}

/* -------- Game Over -------- */
function gameOver(){
  state="gameover";
  beep(120,200);

  if(score>hiScore){
    hiScore=score;
    localStorage.setItem("pixelRunnerHS",hiScore);
  }

  let medalText="";
  let medalClass = "";
  if(score>=100) {
    medalText="üëë LEGEND";
    medalClass = "legend";
  }
  else if(score>=50) {
    medalText="ü•á GOLD";
    medalClass = "gold";
  }
  else if(score>=25) {
    medalText="ü•à SILVER";
    medalClass = "silver";
  }
  else if(score>=10) {
    medalText="ü•â BRONZE";
    medalClass = "bronze";
  }
  else {
    medalText="Keep Running!";
    medalClass = "novice";
  }

  const medalElement = document.getElementById("medal");
  medalElement.textContent = medalText;
  medalElement.className = `medal-display ${medalClass}`;

  document.getElementById("finalScore").innerHTML =
    `Score: <strong>${score}</strong> | Best: <strong>${hiScore}</strong>`;

  document.getElementById("endMsg").style.display="flex";
}

/* -------- Input -------- */
document.addEventListener("keydown",e=>{
  if(e.key===" "||e.key==="ArrowUp")jump();
});

wrap.addEventListener("touchstart",e=>{
  if(state!=="gameover"){
    e.preventDefault();
    jump();
  }
},{passive:false});

wrap.addEventListener("mousedown",()=>{
  if(state!=="gameover")jump();
});

document.getElementById("startBtn").onclick=jump;

document.getElementById("retryBtn").onclick=()=>{
  init();
  state="playing";
  document.getElementById("startMsg").style.display="none";
  loop();
};

init();

})();
</script>
<!-- ORIENTATION GUARD ‚Äî auto shows rotate message when needed -->
<script>
!function(){
  var I='og2-overlay';
  function isTablet(){return Math.min(screen.width,screen.height)>=600}
  function needsRotate(){var l=window.innerWidth>window.innerHeight;return isTablet()?!l:l}

  function build(){
    if(document.getElementById(I))return;

    /* ‚îÄ‚îÄ Styles ‚îÄ‚îÄ */
    var s=document.createElement('style');
    s.textContent=
      '#'+I+'{display:none;position:fixed;inset:0;'+
        'background:linear-gradient(135deg,#0e1218 0%,#1a1f2e 50%,#0e1218 100%);'+
        'z-index:99999;flex-direction:column;align-items:center;justify-content:center;'+
        'font-family:-apple-system,Arial,sans-serif;text-align:center;'+
        'padding:32px;box-sizing:border-box;overflow:hidden}'+
      '#'+I+'.og2-show{display:flex}'+

      /* Glow pulse */
      '#'+I+'::before{content:"";position:absolute;width:300px;height:300px;'+
        'background:radial-gradient(circle,rgba(103,126,234,.18) 0%,transparent 70%);'+
        'border-radius:50%;animation:og2-glow 2.5s ease-in-out infinite}'+
      '@keyframes og2-glow{0%,100%{transform:scale(1);opacity:.5}50%{transform:scale(1.35);opacity:1}}'+

      /* Phone wrap */
      '#og2-phone{position:relative;width:90px;height:90px;'+
        'display:flex;align-items:center;justify-content:center;'+
        'margin-bottom:28px;animation:og2-rot 2.4s ease-in-out infinite}'+
      '@keyframes og2-rot{0%{transform:rotate(0)}35%,65%{transform:rotate(90deg)}100%{transform:rotate(0)}}'+

      /* Phone SVG glow */
      '#og2-phone svg{width:56px;height:90px;'+
        'filter:drop-shadow(0 0 12px rgba(103,126,234,.9)) drop-shadow(0 0 28px rgba(103,126,234,.4))}'+

      /* Arrows */
      '#og2-al,#og2-ar{position:absolute;font-size:24px;opacity:0;'+
        'color:#a78bfa;text-shadow:0 0 10px rgba(167,139,250,.9)}'+
      '#og2-al{left:-2px;animation:og2-ala 2.4s ease-in-out infinite}'+
      '#og2-ar{right:-2px;animation:og2-ara 2.4s ease-in-out infinite}'+
      '@keyframes og2-ala{0%,20%{opacity:0;transform:translateX(6px)}40%{opacity:1;transform:translateX(0)}70%,100%{opacity:0;transform:translateX(-6px)}}'+
      '@keyframes og2-ara{0%,20%{opacity:0;transform:translateX(-6px)}40%{opacity:1;transform:translateX(0)}70%,100%{opacity:0;transform:translateX(6px)}}'+

      /* Title & sub */
      '#og2-title{font-size:1.15rem;font-weight:700;color:#e8edf5;letter-spacing:.05em;margin-bottom:10px;position:relative}'+
      '#og2-sub{font-size:.82rem;color:#64748b;max-width:240px;line-height:1.6;position:relative}'+

      /* Animated gradient bar */
      '#og2-bar{position:relative;width:56px;height:4px;border-radius:2px;margin-top:22px;'+
        'background:linear-gradient(90deg,#667eea,#a78bfa,#22d3ee,#667eea);'+
        'background-size:200% 100%;animation:og2-bar 1.8s linear infinite}'+
      '@keyframes og2-bar{0%{background-position:0%}100%{background-position:200%}}';

    document.head.appendChild(s);

    /* ‚îÄ‚îÄ Overlay HTML ‚îÄ‚îÄ */
    var d=document.createElement('div');
    d.id=I;
    d.innerHTML=
      '<div id="og2-phone">'+
        '<span id="og2-al">\u2039</span>'+
        '<svg viewBox="0 0 56 90" fill="none" xmlns="http://www.w3.org/2000/svg">'+
          '<rect x="2" y="2" width="52" height="86" rx="10" fill="#1e2535" stroke="#667eea" stroke-width="2.5"/>'+
          '<rect x="7" y="12" width="42" height="62" rx="4" fill="#0d1117" opacity=".9"/>'+
          '<rect x="12" y="22" width="32" height="3" rx="1.5" fill="#667eea" opacity=".7"/>'+
          '<rect x="12" y="30" width="24" height="3" rx="1.5" fill="#667eea" opacity=".5"/>'+
          '<rect x="12" y="38" width="28" height="3" rx="1.5" fill="#667eea" opacity=".35"/>'+
          '<rect x="12" y="46" width="20" height="3" rx="1.5" fill="#a78bfa" opacity=".5"/>'+
          '<rect x="12" y="54" width="26" height="3" rx="1.5" fill="#a78bfa" opacity=".35"/>'+
          '<rect x="20" y="78" width="16" height="3" rx="1.5" fill="#667eea" opacity=".7"/>'+
          '<circle cx="28" cy="7" r="2" fill="#667eea" opacity=".6"/>'+
        '</svg>'+
        '<span id="og2-ar">\u203a</span>'+
      '</div>'+
      '<div id="og2-title"></div>'+
      '<div id="og2-sub"></div>'+
      '<div id="og2-bar"></div>';

    document.body.appendChild(d);
  }

  function update(){
    var o=document.getElementById(I);
    if(!o)return;
    if(needsRotate()){
      var landscape=isTablet();
      o.querySelector('#og2-title').textContent=landscape?'Rotate to landscape':'Rotate to portrait';
      o.querySelector('#og2-sub').textContent=landscape
        ?'This game plays best in landscape mode. Please rotate your tablet.'
        :'This game plays best in portrait mode. Please rotate your phone.';
      o.classList.add('og2-show');
    } else {
      o.classList.remove('og2-show');
    }
  }

  function init(){
    build();
    update();
    window.addEventListener('resize',update);
    window.addEventListener('orientationchange',function(){setTimeout(update,350)});
  }

  document.readyState==='loading'
    ?document.addEventListener('DOMContentLoaded',init)
    :init();
}();

</script>
</body>
</html>
