<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<title>Video Poker</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{width:100%;height:100%;overflow:hidden}
body{font-family:-apple-system,BlinkMacSystemFont,'Helvetica Neue',sans-serif;background:#1a1a2e;color:#e0e0e0;display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;height:100vh;height:100dvh;padding:8px;user-select:none}
h1{font-size:1rem;font-weight:700;letter-spacing:.15em;text-transform:uppercase;color:#e94560}
.topbar{display:flex;align-items:center;justify-content:space-between;width:100%;max-width:420px}
.chips{font-size:.9rem;font-weight:700;color:#4fc3f7;font-family:monospace}
.bet-info{font-size:.75rem;color:#aaa}

.paytable{
  width:100%;max-width:420px;background:#0f0f23;border:1px solid #2a2a4a;border-radius:8px;
  padding:4px 8px;font-size:clamp(.45rem,1.8vw,.6rem);
  display:grid;grid-template-columns:1fr auto;gap:1px 8px;
}
.paytable .h{color:#e94560;font-weight:700}.paytable .p{color:#888}.paytable .v{color:#4fc3f7;font-weight:700;text-align:right}
.paytable .hl{color:#fff;background:rgba(233,69,96,.2);padding:1px 4px;border-radius:3px}

.cards-row{display:flex;gap:6px;justify-content:center;width:100%;max-width:420px}
.card-wrap{display:flex;flex-direction:column;align-items:center;gap:4px}
.card{
  width:clamp(52px,16vw,70px);height:clamp(73px,22.4vw,98px);
  background:#f5f5f5;border-radius:6px;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  font-weight:800;border:2px solid #ddd;
  cursor:pointer;transition:transform .15s;
}
.card .r{font-size:clamp(.8rem,3vw,1.1rem)}.card .s{font-size:clamp(.7rem,2.5vw,.9rem)}
.card.red{color:#e94560}.card.black{color:#333}
.card.held{border-color:#4fc3f7;transform:translateY(-6px);box-shadow:0 4px 12px rgba(79,195,247,.3)}
.card.hidden{background:linear-gradient(135deg,#16213e 25%,#1a2744 25%,#1a2744 50%,#16213e 50%,#16213e 75%,#1a2744 75%);background-size:8px 8px;color:transparent;border-color:#2a2a4a}
.hold-label{font-size:.55rem;font-weight:700;color:#4fc3f7;min-height:.8em}

.result{font-size:1.1rem;font-weight:700;text-align:center;min-height:1.3em}
.result.win{color:#538d4e}.result.lose{color:#888}

.bet-btns{display:flex;gap:6px;align-items:center;justify-content:center}
.chip-btn{
  width:clamp(36px,10vw,46px);height:clamp(36px,10vw,46px);
  border-radius:50%;border:3px solid;font-family:inherit;
  font-size:clamp(.55rem,2.2vw,.7rem);font-weight:800;cursor:pointer;
}
.chip-btn.c1{background:#e94560;border-color:#c73652;color:#fff}
.chip-btn.c5{background:#4fc3f7;border-color:#3ba3d4;color:#1a1a2e}
.chip-btn.c10{background:#66bb6a;border-color:#4e9c51;color:#1a1a2e}
.chip-btn.max{background:#ffca28;border-color:#d4a820;color:#1a1a2e;border-radius:16px;padding:0 8px;width:auto}

.actions{display:flex;gap:8px}
.btn{font-family:inherit;font-size:.85rem;font-weight:700;padding:10px 24px;border:none;border-radius:20px;cursor:pointer}
.btn.deal{background:#e94560;color:#fff}
.btn.draw{background:#538d4e;color:#fff}
.btn:disabled{opacity:.3}
.btn:active{transform:scale(.95)}
</style>
</head>
<body>
<h1>VIDEO POKER</h1>
<div class="topbar"><span class="chips" id="chips">ðŸ’° 500</span><span class="bet-info" id="betInfo">Bet: 0</span></div>
<div class="paytable" id="pt"></div>
<div class="cards-row" id="cardsRow"></div>
<div class="result" id="res"></div>
<div class="bet-btns" id="betBtns">
  <button class="chip-btn c1" data-v="1">1</button>
  <button class="chip-btn c5" data-v="5">5</button>
  <button class="chip-btn c10" data-v="10">10</button>
  <button class="chip-btn max" data-v="max">MAX</button>
</div>
<div class="actions">
  <button class="btn deal" id="dealBtn">DEAL</button>
  <button class="btn draw" id="drawBtn" disabled>DRAW</button>
</div>
<script>
(function(){
var SUITS=['â™ ','â™¥','â™¦','â™£'];
var RANKS=['2','3','4','5','6','7','8','9','10','J','Q','K','A'];
var VALS=[2,3,4,5,6,7,8,9,10,11,12,13,14];
var RED={'â™¥':1,'â™¦':1};
var HANDS=[
  {name:'Royal Flush',pay:250},
  {name:'Straight Flush',pay:50},
  {name:'Four of a Kind',pay:25},
  {name:'Full House',pay:9},
  {name:'Flush',pay:6},
  {name:'Straight',pay:4},
  {name:'Three of a Kind',pay:3},
  {name:'Two Pair',pay:2},
  {name:'Jacks or Better',pay:1}
];

var chips=500,bet=0,deck,hand,held,phase,winIdx=-1;
var chipsEl=document.getElementById('chips'),betInfoEl=document.getElementById('betInfo');
var cardsRow=document.getElementById('cardsRow'),resEl=document.getElementById('res');
var dealBtn=document.getElementById('dealBtn'),drawBtn=document.getElementById('drawBtn');
var ptEl=document.getElementById('pt');

function buildPaytable(){
  ptEl.innerHTML='<span class="h">Hand</span><span class="h" style="text-align:right">Payout</span>';
  for(var i=0;i<HANDS.length;i++){
    var cls=winIdx===i?'hl':'p';
    ptEl.innerHTML+='<span class="'+cls+'">'+HANDS[i].name+'</span><span class="v '+(winIdx===i?'hl':'')+'">Ã—'+HANDS[i].pay+'</span>';
  }
}

function mkDeck(){
  var d=[];
  for(var s=0;s<4;s++)for(var r=0;r<13;r++)d.push({suit:SUITS[s],rank:RANKS[r],val:VALS[r],red:!!RED[SUITS[s]]});
  for(var i=d.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1));var t=d[i];d[i]=d[j];d[j]=t;}
  return d;
}

function renderCards(){
  cardsRow.innerHTML='';
  for(var i=0;i<5;i++){
    var w=document.createElement('div');w.className='card-wrap';
    var hl=document.createElement('div');hl.className='hold-label';
    hl.textContent=held[i]?'HELD':'';
    var c=document.createElement('div');
    if(!hand[i]){
      c.className='card hidden';
    }else{
      c.className='card'+(hand[i].red?' red':' black');
      c.innerHTML='<span class="r">'+hand[i].rank+'</span><span class="s">'+hand[i].suit+'</span>';
      if(held[i])c.classList.add('held');
    }
    c.setAttribute('data-i',i);
    w.appendChild(hl);w.appendChild(c);cardsRow.appendChild(w);
  }
}

function evaluate(h){
  var vals=h.map(function(c){return c.val;}).sort(function(a,b){return a-b;});
  var suits=h.map(function(c){return c.suit;});
  var counts={};for(var i=0;i<5;i++){counts[vals[i]]=(counts[vals[i]]||0)+1;}
  var groups=Object.values(counts).sort(function(a,b){return b-a;});
  var isFlush=suits.every(function(s){return s===suits[0];});
  var isStraight=(vals[4]-vals[0]===4&&new Set(vals).size===5)||(vals[0]===2&&vals[1]===3&&vals[2]===4&&vals[3]===5&&vals[4]===14);
  var isRoyal=isFlush&&vals[0]===10&&vals[4]===14&&isStraight;

  if(isRoyal)return 0;
  if(isStraight&&isFlush)return 1;
  if(groups[0]===4)return 2;
  if(groups[0]===3&&groups[1]===2)return 3;
  if(isFlush)return 4;
  if(isStraight)return 5;
  if(groups[0]===3)return 6;
  if(groups[0]===2&&groups[1]===2)return 7;
  // Jacks or better (pair of J,Q,K,A)
  if(groups[0]===2){
    for(var v in counts){if(counts[v]===2&&parseInt(v)>=11)return 8;}
  }
  return -1;
}

function startBet(){
  phase='bet';bet=0;hand=[null,null,null,null,null];held=[false,false,false,false,false];
  winIdx=-1;resEl.textContent='';resEl.className='result';
  dealBtn.disabled=false;drawBtn.disabled=true;
  chipsEl.textContent='ðŸ’° '+chips;betInfoEl.textContent='Bet: 0';
  buildPaytable();renderCards();
}

function placeBet(v){
  if(phase!=='bet')return;
  if(v==='max')v=Math.min(chips,25);else v=parseInt(v);
  if(chips<v)v=chips;if(v<=0)return;
  bet+=v;chips-=v;
  chipsEl.textContent='ðŸ’° '+chips;betInfoEl.textContent='Bet: '+bet;
}

function deal(){
  if(bet===0)return;
  phase='hold';deck=mkDeck();
  hand=[];for(var i=0;i<5;i++)hand.push(deck.pop());
  held=[false,false,false,false,false];
  dealBtn.disabled=true;drawBtn.disabled=false;
  renderCards();buildPaytable();
}

function toggleHold(i){
  if(phase!=='hold')return;
  held[i]=!held[i];renderCards();
}

function draw(){
  if(phase!=='hold')return;
  phase='result';
  for(var i=0;i<5;i++){if(!held[i])hand[i]=deck.pop();}
  winIdx=evaluate(hand);
  if(winIdx>=0){
    var payout=HANDS[winIdx].pay*bet;
    chips+=payout;
    resEl.textContent=HANDS[winIdx].name+'! +'+payout;resEl.className='result win';
  }else{
    resEl.textContent='No win';resEl.className='result lose';
  }
  if(chips<=0){chips=500;resEl.textContent+=' (Reset to 500)';}
  chipsEl.textContent='ðŸ’° '+chips;
  drawBtn.disabled=true;
  renderCards();buildPaytable();
  setTimeout(startBet,2200);
}

cardsRow.addEventListener('click',function(e){var c=e.target.closest('[data-i]');if(!c)return;toggleHold(parseInt(c.getAttribute('data-i')));});
document.getElementById('betBtns').addEventListener('click',function(e){var b=e.target.closest('[data-v]');if(!b)return;placeBet(b.getAttribute('data-v'));});
dealBtn.addEventListener('click',deal);
drawBtn.addEventListener('click',draw);

startBet();
})();
</script>
</body>
</html>
